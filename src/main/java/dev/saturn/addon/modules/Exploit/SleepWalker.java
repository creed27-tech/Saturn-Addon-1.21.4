package dev.saturn.addon.modules.Exploit;

import dev.saturn.addon.Saturn;
import meteordevelopment.meteorclient.systems.modules.Module;
import meteordevelopment.meteorclient.systems.modules.Modules;
import net.minecraft.entity.EntityPose;
import net.minecraft.client.MinecraftClient;
import net.minecraft.client.gui.screen.Screen;

public class SleepWalker extends Module {

    private final MinecraftClient mc = MinecraftClient.getInstance();

    public SleepWalker() {
        super(Saturn.Experimental, "sleep-walker", "Allows you to walk while sleeping and makes your hitbox small.");
    }

    @Override
    public void onActivate() {
        super.onActivate();
        // Repeatedly checks if the player is sleeping and modifies their pose
        tickHandler();

    }

    private void tickHandler() {
        // Check if the player is sleeping
        if (mc.player != null && mc.player.isSleeping()) {
            // Set the player's pose to STANDING (makes them walk while sleeping)
            mc.player.setPose(EntityPose.STANDING);
            // Clear the sleeping position to allow walking
            mc.player.clearSleepingPosition();
            // Close the sleeping screen (so player isn't stuck in bed)
            mc.setScreen(null);
        }
    }
}
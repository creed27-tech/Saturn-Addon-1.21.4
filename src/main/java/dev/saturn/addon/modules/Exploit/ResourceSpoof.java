package dev.saturn.addon.modules.Exploit;

import dev.saturn.addon.Saturn;
import meteordevelopment.meteorclient.systems.modules.Module;
import meteordevelopment.meteorclient.systems.modules.Category;
import meteordevelopment.meteorclient.events.packets.PacketEvent;
import meteordevelopment.orbit.EventHandler;
import net.minecraft.network.packet.c2s.common.ResourcePackStatusC2SPacket;
import net.minecraft.network.packet.c2s.common.ResourcePackStatusC2SPacket.Status.*;
import net.minecraft.network.packet.s2c.common.ResourcePackSendS2CPacket;

import java.util.UUID;

public class ResourceSpoof extends Module {

    public ResourceSpoof() {
        super(Saturn.Exploit, "resource-spoof", "Prevents servers from forcing you to download their resource packs. | Ported from LiquidBounce");
    }

    @EventHandler
    private void onPacketReceive(PacketEvent.Receive event) {
        if (event.packet instanceof ResourcePackSendS2CPacket packet) {
            // Simulate accepting and successfully loading the resource pack
            event.cancel();  // Cancel the server's resource pack request
        }
    }

    @EventHandler
    private void onPacketSend(PacketEvent.Send event) {
        if (event.packet instanceof ResourcePackStatusC2SPacket packet) {
            // Cancel packets with statuses that indicate a decline or failure
                event.cancel();
            }
        }
    }